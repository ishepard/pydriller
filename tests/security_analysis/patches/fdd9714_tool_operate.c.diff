@@ -342,6 +342,9 @@ static CURLcode pre_transfer(struct GlobalConfig *global,
   curl_off_t uploadfilesize = -1;
   struct_stat fileinfo;
   CURLcode result = CURLE_OK;
+#ifdef CURL_DISABLE_LIBCURL_OPTION
+  (void)global; /* otherwise used in the my_setopt macros */
+#endif
 
   if(per->uploadfile && !stdin_upload(per->uploadfile)) {
     /* VMS Note:
