@@ -74,7 +74,7 @@ static char *inet_ntop4(const unsigned char *src, char *dst, size_t size)
 
   len = strlen(tmp);
   if(len == 0 || len >= size) {
-    errno = ENOSPC;
+    CURL_SETERRNO(ENOSPC);
     return NULL;
   }
   strcpy(dst, tmp);
@@ -153,7 +153,7 @@ static char *inet_ntop6(const unsigned char *src, char *dst, size_t size)
     if(i == 6 && best.base == 0 &&
         (best.len == 6 || (best.len == 5 && words[5] == 0xffff))) {
       if(!inet_ntop4(src + 12, tp, sizeof(tmp) - (tp - tmp))) {
-        errno = ENOSPC;
+        CURL_SETERRNO(ENOSPC);
         return NULL;
       }
       tp += strlen(tp);
@@ -171,7 +171,7 @@ static char *inet_ntop6(const unsigned char *src, char *dst, size_t size)
   /* Check for overflow, copy, and we are done.
    */
   if((size_t)(tp - tmp) > size) {
-    errno = ENOSPC;
+    CURL_SETERRNO(ENOSPC);
     return NULL;
   }
   strcpy(dst, tmp);
@@ -197,7 +197,7 @@ char *Curl_inet_ntop(int af, const void *src, char *buf, size_t size)
   case AF_INET6:
     return inet_ntop6((const unsigned char *)src, buf, size);
   default:
-    errno = EAFNOSUPPORT;
+    CURL_SETERRNO(EAFNOSUPPORT);
     return NULL;
   }
 }
