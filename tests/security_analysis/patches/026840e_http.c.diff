@@ -169,10 +169,10 @@ static CURLcode http_setup_conn(struct connectdata *conn)
   Curl_mime_initpart(&http->form, conn->data);
   data->req.protop = http;
 
-  if(data->set.h3opts & CURLH3_DIRECT) {
+  if(data->set.httpversion == CURL_HTTP_VERSION_3) {
     if(conn->handler->flags & PROTOPT_SSL)
-      /* Only go h3-direct on HTTPS URLs. It needs a UDP socket and does the
-         QUIC dance. */
+      /* Only go HTTP/3 directly on HTTPS URLs. It needs a UDP socket and does
+         the QUIC dance. */
       conn->transport = TRNSPRT_QUIC;
     else {
       failf(data, "HTTP/3 requested for non-HTTPS URL");
