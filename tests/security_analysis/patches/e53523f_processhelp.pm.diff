@@ -59,6 +59,7 @@ use serverhelp qw(
     servername_id
     mainsockf_pidfilename
     datasockf_pidfilename
+    logmsg
     );
 
 use pathhelp qw(
@@ -136,6 +137,7 @@ sub pidexists {
             $pid -= 65536;
             if($^O ne 'MSWin32') {
                 my $filter = "PID eq $pid";
+                # https://ss64.com/nt/tasklist.html
                 my $result = `tasklist -fi \"$filter\" 2>nul`;
                 if(index($result, "$pid") != -1) {
                     return -$pid;
@@ -166,8 +168,10 @@ sub pidterm {
             $pid -= 65536;
             if($^O ne 'MSWin32') {
                 my $filter = "PID eq $pid";
+                # https://ss64.com/nt/tasklist.html
                 my $result = `tasklist -fi \"$filter\" 2>nul`;
                 if(index($result, "$pid") != -1) {
+                    # https://ss64.com/nt/taskkill.html
                     system("taskkill -fi \"$filter\" >nul 2>&1");
                 }
                 return;
@@ -192,11 +196,15 @@ sub pidkill {
             $pid -= 65536;
             if($^O ne 'MSWin32') {
                 my $filter = "PID eq $pid";
-                my $result = `tasklist -fi \"$filter\" 2>nul`;
+                # https://ss64.com/nt/tasklist.html
+                my $cmd = "tasklist -fi \"$filter\" 2>nul";
+                logmsg "Executing: '$cmd'\n";
+                my $result = `$cmd`;
                 if(index($result, "$pid") != -1) {
-                    system("taskkill -f -t -fi \"$filter\" >nul 2>&1");
-                    # Windows XP Home compatibility
-                    system("tskill $pid >nul 2>&1");
+                    # https://ss64.com/nt/taskkill.html
+                    my $cmd = "taskkill -f -t -fi \"$filter\" >nul 2>&1";
+                    logmsg "Executing: '$cmd'\n";
+                    system($cmd);
                 }
                 return;
             }
