@@ -44,6 +44,10 @@
 #include <socket.h>
 #endif
 
+#ifdef __MSDOS__
+#include <dos.h>  /* delay() */
+#endif
+
 #include <curl/curl.h>
 
 #include "urldata.h"
@@ -111,7 +115,7 @@ int Curl_select(curl_socket_t readfd, curl_socket_t writefd, int timeout_ms)
     if (pfd[num].revents & (POLLIN|POLLHUP))
       ret |= CSELECT_IN;
     if (pfd[num].revents & POLLERR) {
-#ifdef __CYGWIN__ 
+#ifdef __CYGWIN__
       /* Cygwin 1.5.21 needs this hack to pass test 160 */
       if (errno == EINPROGRESS)
         ret |= CSELECT_IN;
@@ -149,7 +153,7 @@ int Curl_select(curl_socket_t readfd, curl_socket_t writefd, int timeout_ms)
 #ifdef WIN32
     Sleep(timeout_ms);
 #elif defined(__MSDOS__)
-    delay(ms);
+    delay(timeout_ms);
 #else
     select(0, NULL, NULL, NULL, &timeout);
 #endif
