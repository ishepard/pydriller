@@ -23,18 +23,17 @@
  ***************************************************************************/
 #include "tool_setup.h"
 
-#if defined(WIN32) && !defined(__MINGW64__)
+#if defined(WIN32) && !defined(HAVE_FTRUNCATE)
 
 int tool_ftruncate64(int fd, curl_off_t where);
 
 #undef  ftruncate
 #define ftruncate(fd,where) tool_ftruncate64(fd,where)
 
-#ifndef HAVE_FTRUNCATE
-#  define HAVE_FTRUNCATE 1
-#endif
+#define HAVE_FTRUNCATE 1
+#define USE_TOOL_FTRUNCATE 1
 
-#endif /* WIN32  && ! __MINGW64__ */
+#endif /* WIN32  && ! HAVE_FTRUNCATE */
 
 /*
 ** callback for CURLOPT_SEEKFUNCTION
