@@ -20,6 +20,13 @@
     )
   "Curl C Programming Style")
 
+(defun curl-code-cleanup ()
+  "no docs"
+  (interactive)
+  (untabify (point-min) (point-max))
+  (delete-trailing-whitespace)
+)
+
 ;; Customizations for all of c-mode, c++-mode, and objc-mode
 (defun curl-c-mode-common-hook ()
   "Curl C mode hook"
@@ -33,7 +40,7 @@
   ;; keybindings for C, C++, and Objective-C.  We can put these in
   ;; c-mode-base-map because of inheritance ...
   (define-key c-mode-base-map "\M-q" 'c-fill-paragraph)
-  (define-key c-mode-base-map "\M-m" 'delete-trailing-whitespace)
+  (define-key c-mode-base-map "\M-m" 'curl-code-cleanup)
   (setq c-recognize-knr-p nil)
   ;;; (add-hook 'write-file-hooks 'delete-trailing-whitespace t)
   (setq show-trailing-whitespace t)
