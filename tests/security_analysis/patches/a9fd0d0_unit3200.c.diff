@@ -47,6 +47,7 @@ static CURLcode unit_stop(void)
 }
 
 #ifdef __GNUC__
+#pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Woverlength-strings"
 #endif
 
@@ -161,6 +162,10 @@ UNITTEST_START
   }
 UNITTEST_STOP
 
+#ifdef __GNUC__
+#pragma GCC diagnostic pop
+#endif
+
 #else
 static CURLcode unit_setup(void)
 {
