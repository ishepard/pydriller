@@ -562,19 +562,14 @@ CURLcode Curl_ntlm_core_mk_ntlmv2_resp(unsigned char *ntlmv2hash,
   CURLcode res = CURLE_OK;
 
   /* Calculate the timestamp */
-#if defined(HAVE_LONGLONG)
-#if defined(DEBUGBUILD)
-  tw = 11644473600ULL * 10000000ULL;
-#else
-  tw = ((long long)time(NULL) + 11644473600ULL) * 10000000ULL;
-#endif
-#else
-#if defined(DEBUGBUILD)
-  tw = 11644473600ui64 * 10000000ui64;
-#else
-  tw = ((__int64)time(NULL) + 11644473600ui64) * 10000000ui64;
-#endif
+#ifdef DEBUGBUILD
+  char *force_timestamp = getenv("CURL_FORCETIME");
+  if(force_timestamp)
+    tw = 11644473600ULL * 10000000ULL;
+  else
 #endif
+  tw = ((long long)time(NULL) + 11644473600ULL) * 10000000ULL;
+
   /* Calculate the response len */
   len = NTLM_HMAC_MD5_LEN + NTLMv2_BLOB_LEN;
 
