@@ -24,9 +24,9 @@
 # Usage:
 # cat ../../include/curl/curl.h | perl mk-lib1521.pl > lib1521.c
 
-# minimum and maximum 32 signed values
-my $minlong = - (1<<31)+1;
-my $maxlong = (1<<31);
+# minimum and maximum long signed values
+my $minlong = "LONG_MIN";
+my $maxlong = "LONG_MAX";
 
 print <<HEADER
 /***************************************************************************
@@ -51,8 +51,8 @@ print <<HEADER
  *
  ***************************************************************************/
 #include "test.h"
-
 #include "memdebug.h"
+#include <limits.h>
 
 /* This source code is generated by mk-lib1521.pl ! */
 
