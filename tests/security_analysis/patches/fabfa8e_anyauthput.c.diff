@@ -100,6 +100,9 @@ int main(int argc, char **argv)
 
   /* get the file size of the local file */
   fp = fopen(file, "rb");
+  if(!fp)
+    return 2;
+
   fstat(fileno(fp), &file_info);
 
   /* In Windows, this inits the Winsock stuff */
