@@ -16,7 +16,7 @@
 #include <sys/stat.h>
 #include <fcntl.h>
 
-#include "timeval.h"
+#include "testutil.h"
 
 #define MAIN_LOOP_HANG_TIMEOUT     30 * 1000
 #define MULTI_PERFORM_HANG_TIMEOUT 20 * 1000
@@ -66,7 +66,7 @@ int test(char *URL)
   }
 
   ml_timedout = FALSE;
-  ml_start = curlx_tvnow();
+  ml_start = tutil_tvnow();
 
   fprintf(stderr, "Start at URL 0\n");
 
@@ -78,17 +78,17 @@ int test(char *URL)
     interval.tv_sec = 1;
     interval.tv_usec = 0;
 
-    if (curlx_tvdiff(curlx_tvnow(), ml_start) > 
+    if (tutil_tvdiff(tutil_tvnow(), ml_start) > 
         MAIN_LOOP_HANG_TIMEOUT) {
       ml_timedout = TRUE;
       break;
     }
     mp_timedout = FALSE;
-    mp_start = curlx_tvnow();
+    mp_start = tutil_tvnow();
 
     while (res == CURLM_CALL_MULTI_PERFORM) {
       res = (int)curl_multi_perform(m, &running);
-      if (curlx_tvdiff(curlx_tvnow(), mp_start) > 
+      if (tutil_tvdiff(tutil_tvnow(), mp_start) > 
           MULTI_PERFORM_HANG_TIMEOUT) {
         mp_timedout = TRUE;
         break;
