@@ -16,7 +16,7 @@ Unfortunately it seems some perls like msysgit can't handle a global input-only
 =end comment
 =cut
 
-my $some_dir=".";
+my $some_dir=$ARGV[1] || ".";
 
 opendir(my $dh, $some_dir) || die "Can't opendir $some_dir: $!";
 my @s = grep { /\.d$/ && -f "$some_dir/$_" } readdir($dh);
@@ -101,7 +101,7 @@ sub added {
 
 sub single {
     my ($f, $standalone)=@_;
-    open(F, "<:crlf", "$f") ||
+    open(F, "<:crlf", "$some_dir/$f") ||
         return 1;
     my $short;
     my $long;
@@ -235,7 +235,7 @@ sub single {
 
 sub getshortlong {
     my ($f)=@_;
-    open(F, "<:crlf", "$f");
+    open(F, "<:crlf", "$some_dir/$f");
     my $short;
     my $long;
     my $help;
@@ -281,7 +281,7 @@ sub indexoptions {
 
 sub header {
     my ($f)=@_;
-    open(F, "<:crlf", "$f");
+    open(F, "<:crlf", "$some_dir/$f");
     my @d;
     while(<F>) {
         push @d, $_;
@@ -371,7 +371,7 @@ sub getargs {
         }
     } while($f);
 
-    print "Usage: gen.pl <mainpage/listhelp/single FILE/protos>\n";
+    print "Usage: gen.pl <mainpage/listhelp/single FILE/protos> [srcdir]\n";
 }
 
 #------------------------------------------------------------------------
