@@ -12,7 +12,7 @@
 
 #include <sys/types.h>
 
-#include "timeval.h"
+#include "testutil.h"
 
 #define MAIN_LOOP_HANG_TIMEOUT     300 * 1000
 #define MULTI_PERFORM_HANG_TIMEOUT 120 * 1000
@@ -72,7 +72,7 @@ int test(char *URL)
   }
 
   ml_timedout = FALSE;
-  ml_start = curlx_tvnow();
+  ml_start = tutil_tvnow();
 
   while(!done) {
     fd_set rd, wr, exc;
@@ -82,17 +82,17 @@ int test(char *URL)
     interval.tv_sec = 1;
     interval.tv_usec = 0;
 
-    if (curlx_tvdiff(curlx_tvnow(), ml_start) >
+    if (tutil_tvdiff(tutil_tvnow(), ml_start) >
         MAIN_LOOP_HANG_TIMEOUT) {
       ml_timedout = TRUE;
       break;
     }
     mp_timedout = FALSE;
-    mp_start = curlx_tvnow();
+    mp_start = tutil_tvnow();
 
     while (res == CURLM_CALL_MULTI_PERFORM) {
       res = (int)curl_multi_perform(m, &running);
-      if (curlx_tvdiff(curlx_tvnow(), mp_start) >
+      if (tutil_tvdiff(tutil_tvnow(), mp_start) >
           MULTI_PERFORM_HANG_TIMEOUT) {
         mp_timedout = TRUE;
         break;
