@@ -91,7 +91,7 @@ size_t tool_read_cb(char *buffer, size_t sz, size_t nmemb, void *userdata)
   rc = read(per->infd, buffer, sz*nmemb);
   if(rc < 0) {
     if(errno == EAGAIN) {
-      errno = 0;
+      CURL_SETERRNO(0);
       config->readbusy = TRUE;
       return CURL_READFUNC_PAUSE;
     }
